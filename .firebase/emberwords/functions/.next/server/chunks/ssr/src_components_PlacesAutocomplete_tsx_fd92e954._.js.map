{"version":3,"sources":["../../../../src/components/PlacesAutocomplete.tsx","../../../../node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Search, Loader2, MapPin } from 'lucide-react';\nimport { GOOGLE_PLACES_API_KEY, LocationResult } from '@/lib/locationService';\n\ninterface PlacesAutocompleteProps {\n  onSelect: (location: LocationResult) => void;\n}\n\nexport default function PlacesAutocomplete({ onSelect }: PlacesAutocompleteProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const autocompleteRef = useRef<google.maps.places.Autocomplete | null>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check if Google Places is already loaded\n    if (window.google?.maps?.places) {\n      setIsLoaded(true);\n      setIsLoading(false);\n      return;\n    }\n\n    // Check if script is already being loaded\n    const existingScript = document.querySelector(`script[src*=\"maps.googleapis.com/maps/api/js\"]`);\n    if (existingScript) {\n      // Wait for existing script to load\n      const checkLoaded = setInterval(() => {\n        if (window.google?.maps?.places) {\n          setIsLoaded(true);\n          setIsLoading(false);\n          clearInterval(checkLoaded);\n        }\n      }, 100);\n      return () => clearInterval(checkLoaded);\n    }\n\n    // Load new script\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_PLACES_API_KEY}&libraries=places&language=nl`;\n    script.async = true;\n    script.onload = () => {\n      setIsLoaded(true);\n      setIsLoading(false);\n    };\n    script.onerror = () => {\n      console.error('Failed to load Google Places API');\n      setIsLoading(false);\n    };\n    document.head.appendChild(script);\n  }, []);\n\n  useEffect(() => {\n    if (!isLoaded || !inputRef.current) return;\n\n    // Initialize autocomplete\n    autocompleteRef.current = new google.maps.places.Autocomplete(inputRef.current, {\n      fields: ['geometry', 'name', 'formatted_address', 'address_components'],\n    });\n\n    // Listen for place selection\n    autocompleteRef.current.addListener('place_changed', () => {\n      const place = autocompleteRef.current?.getPlace();\n\n      if (place?.geometry?.location) {\n        const lat = place.geometry.location.lat();\n        const lng = place.geometry.location.lng();\n\n        // Extract city and country from address components\n        let city = '';\n        let country = '';\n        place.address_components?.forEach(component => {\n          if (component.types.includes('locality')) {\n            city = component.long_name;\n          }\n          if (component.types.includes('country')) {\n            country = component.long_name;\n          }\n        });\n\n        // Build display name\n        const name = city\n          ? `${place.name}, ${city}`\n          : place.name || place.formatted_address || 'Geselecteerde locatie';\n\n        onSelect({\n          lat,\n          lng,\n          name,\n          city,\n          country\n        });\n      }\n    });\n\n    // Focus input\n    inputRef.current.focus();\n  }, [isLoaded, onSelect]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-4\">\n        <Loader2 className=\"animate-spin text-amber-500\" size={24} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\">\n      <Search size={20} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 z-10\" />\n      <input\n        ref={inputRef}\n        type=\"text\"\n        placeholder=\"Zoek een plaats, restaurant, cafe...\"\n        className=\"w-full pl-10 pr-4 py-3 border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 text-stone-800\"\n      />\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 21-4.34-4.34', key: '14j7rj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OCiBA,CAAA,GAAM,EAAA,CAAA,EAAS,CAAA,CAAA,CAAA,QAAA,OAAA,EAAiB,CAAA,QAhBI,CAClC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,YAAoB,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,OAAA,CAAU,CAAA,EAChD,CAAA,CAAA,CAAA,CAAA,KAAU,CAAE,CAAA,CAAA,CAAA,AAAI,IAAA,CAAM,AAAN,CAAM,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,AAAG,CAAA,CAAA,CAAA,CAAK,IAAK,QAAA,CAAU,CAAA,CAC1D,EDHA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMe,SAAS,EAAmB,UAAE,CAAQ,CAA2B,EAC9E,IAAM,EAAW,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MACpC,EAAkB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAyC,MACjE,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,SAsF3C,CApFA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,GAAI,OAAO,MAAM,EAAE,MAAM,OAAQ,CAC/B,GAAY,GACZ,GAAa,GACb,MACF,CAIA,GADuB,CACnB,QAD4B,aAAa,CAAC,CAAC,8CAA8C,CAAC,EAC1E,CAElB,IAAM,EAAc,YAAY,KAC1B,OAAO,MAAM,EAAE,MAAM,QAAQ,CAC/B,GAAY,GACZ,GAAa,GACb,cAAc,GAElB,EAAG,KACH,MAAO,IAAM,cAAc,EAC7B,CAGA,IAAM,EAAS,SAAS,aAAa,CAAC,UACtC,EAAO,GAAG,CAAG,CAAC,4CAA4C,EAAE,EAAA,qBAAqB,CAAC,6BAA6B,CAAC,CAChH,EAAO,KAAK,EAAG,EACf,EAAO,MAAM,CAAG,KACd,GAAY,GACZ,EAAa,GACf,EACA,EAAO,OAAO,CAAG,KACf,QAAQ,KAAK,CAAC,oCACd,GAAa,EACf,EACA,SAAS,IAAI,CAAC,WAAW,CAAC,EAC5B,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,GAAa,EAAS,OAAO,AAAjB,EAAmB,CAGpC,EAAgB,OAAO,CAAG,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAS,OAAO,CAAE,CAC9E,OAAQ,CAAC,WAAY,OAAQ,oBAAqB,qBAAqB,AACzE,GAGA,EAAgB,OAAO,CAAC,WAAW,CAAC,gBAAiB,KACnD,IAAM,EAAQ,EAAgB,OAAO,EAAE,WAEvC,GAAI,GAAO,UAAU,SAAU,CAC7B,IAAM,EAAM,EAAM,QAAQ,CAAC,QAAQ,CAAC,GAAG,GACjC,EAAM,EAAM,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAGnC,EAAO,GACP,EAAU,GACd,EAAM,kBAAkB,EAAE,QAAQ,IAC5B,EAAU,KAAK,CAAC,QAAQ,CAAC,aAAa,CACxC,EAAO,EAAU,SAAA,AAAS,EAExB,EAAU,KAAK,CAAC,QAAQ,CAAC,YAAY,CACvC,EAAU,EAAU,SAAA,AAAS,CAEjC,GAOA,EAAS,KACP,MACA,EACA,KAPW,EACT,CAAA,EAAG,EAAM,IAAI,CAAC,EAAE,EAAE,EAAA,CAAM,CACxB,EAAM,IAAI,EAAI,EAAM,iBAAiB,EAAI,6BAM3C,UACA,CACF,EACF,CACF,GAGA,EAAS,OAAO,CAAC,KAAK,GACxB,EAAG,CAAC,EAAU,EAAS,EAEnB,GAEA,CAAA,EAAA,EAAA,GAAA,AAFW,AAEX,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,8BAA8B,KAAM,OAM3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAO,KAAM,GAAI,UAAU,iEAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,KAAK,OACL,YAAY,uCACZ,UAAU,oIAIlB","ignoreList":[1]}