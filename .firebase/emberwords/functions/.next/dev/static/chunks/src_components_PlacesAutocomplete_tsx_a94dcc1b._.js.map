{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dtevandijk/Downloads/wereldwoorden-next/src/components/PlacesAutocomplete.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Search, Loader2, MapPin } from 'lucide-react';\nimport { GOOGLE_PLACES_API_KEY, LocationResult } from '@/lib/locationService';\n\ninterface PlacesAutocompleteProps {\n  onSelect: (location: LocationResult) => void;\n  onCancel: () => void;\n}\n\nexport default function PlacesAutocomplete({ onSelect, onCancel }: PlacesAutocompleteProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const autocompleteRef = useRef<google.maps.places.Autocomplete | null>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check if Google Places is already loaded\n    if (window.google?.maps?.places) {\n      setIsLoaded(true);\n      setIsLoading(false);\n      return;\n    }\n\n    // Check if script is already being loaded\n    const existingScript = document.querySelector(`script[src*=\"maps.googleapis.com/maps/api/js\"]`);\n    if (existingScript) {\n      // Wait for existing script to load\n      const checkLoaded = setInterval(() => {\n        if (window.google?.maps?.places) {\n          setIsLoaded(true);\n          setIsLoading(false);\n          clearInterval(checkLoaded);\n        }\n      }, 100);\n      return () => clearInterval(checkLoaded);\n    }\n\n    // Load new script\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_PLACES_API_KEY}&libraries=places&language=nl`;\n    script.async = true;\n    script.onload = () => {\n      setIsLoaded(true);\n      setIsLoading(false);\n    };\n    script.onerror = () => {\n      console.error('Failed to load Google Places API');\n      setIsLoading(false);\n    };\n    document.head.appendChild(script);\n  }, []);\n\n  useEffect(() => {\n    if (!isLoaded || !inputRef.current) return;\n\n    // Initialize autocomplete\n    autocompleteRef.current = new google.maps.places.Autocomplete(inputRef.current, {\n      fields: ['geometry', 'name', 'formatted_address', 'address_components'],\n    });\n\n    // Listen for place selection\n    autocompleteRef.current.addListener('place_changed', () => {\n      const place = autocompleteRef.current?.getPlace();\n\n      if (place?.geometry?.location) {\n        const lat = place.geometry.location.lat();\n        const lng = place.geometry.location.lng();\n\n        // Extract city and country from address components\n        let city = '';\n        let country = '';\n        place.address_components?.forEach(component => {\n          if (component.types.includes('locality')) {\n            city = component.long_name;\n          }\n          if (component.types.includes('country')) {\n            country = component.long_name;\n          }\n        });\n\n        // Build display name\n        const name = city\n          ? `${place.name}, ${city}`\n          : place.name || place.formatted_address || 'Geselecteerde locatie';\n\n        onSelect({\n          lat,\n          lng,\n          name,\n          city,\n          country\n        });\n      }\n    });\n\n    // Focus input\n    inputRef.current.focus();\n  }, [isLoaded, onSelect]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-4\">\n        <Loader2 className=\"animate-spin text-amber-500\" size={24} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"relative\">\n        <Search size={20} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 z-10\" />\n        <input\n          ref={inputRef}\n          type=\"text\"\n          placeholder=\"Zoek een plaats, restaurant, cafe...\"\n          className=\"w-full pl-10 pr-4 py-3 border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 text-stone-800\"\n        />\n      </div>\n      <button\n        onClick={onCancel}\n        className=\"text-sm text-stone-500 hover:text-stone-700\"\n      >\n        Annuleer\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}